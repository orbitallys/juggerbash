:root{--bg:#000;--white:#fff}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--white);font-family:'Press Start 2P',monospace;display:flex;align-items:center;justify-content:center;height:100vh}
.screen{width:100%;max-width:1000px;padding:8px;text-align:center}
.hidden{display:none}
.menu-buttons{display:flex;flex-direction:column;gap:8px;align-items:center}
.menu-row{position:relative;width:240px}
.menu-btn{width:240px;background:#000000;color:var(--white);border:2px solid green;padding:10px 12px;cursor:pointer;font-size:12px}
#soulMenu{position:absolute;width:24px;height:24px;z-index:5;left:calc(50% - 120px);top:120px;transition:left 0.08s, top 0.08s}
#battleArea{position:relative;width:960px;height:720px;display:flex;align-items:center;justify-content:center;flex-direction:column}
#enemySprite{position:absolute;top:12px;left:50%;transform:translateX(-50%);width:220px;height:320px;z-index:5;image-rendering:pixelated}
#enemyHpWrap{position:absolute;top:340px;left:50%;transform:translateX(-50%);width:240px;height:10px;border:2px solid #fff;background:#222;z-index:6}
#enemyHpBar{height:100%;background:lime;width:100%}
#gameCanvas{position:absolute;top:0;left:0;width:960px;height:640px;background:transparent;z-index:1}
#battleUI{position:relative;bottom:12px;width:720px;display:flex;flex-direction:column;align-items:center;gap:8px;z-index:7}
#dialogueBox{width:720px;height:96px;border:2px solid #fff;background:#000000;padding:8px;display:flex;align-items:center;justify-content:flex-start;position:relative;overflow:hidden}
#dialogueText{font-size:12px;line-height:1.2;text-align:left;white-space:pre-wrap;width:100%}
#choiceGrid{position:absolute;left:8px;top:8px;display:grid;grid-template-columns:1fr 1fr;gap:6px;align-items:start}
.choiceItem{padding:6px;border-left:6px solid transparent}
.choiceItem.highlight{border-left-color:yellow;background:#222}
#sliderWrap{position:absolute;left:50%;transform:translateX(-50%);bottom:6px}
#sliderCanvas{image-rendering:pixelated}
#hpRow{width:720px;display:flex;flex-direction:column;align-items:flex-start;gap:6px}
#hpText{color:white;font-size:12px}
#hpBarWrap{width:520px;height:16px;border:2px solid #fff;position:relative;background:#222}
#hpBar{height:100%;background:yellow;width:100%}
#hpLost{position:absolute;right:0;top:0;height:100%;background:crimson;width:0;opacity:0.9;transition:opacity 0.5s,width 0.5s}
#actionRow{display:flex;gap:8px}
.actionBtn{width:160px;height:48px;border:2px solid #10b80c;image-rendering:pixelated;cursor:pointer}
.actionBtn.selected{border-color:yellow;box-shadow:none}
.itemCell{border:2px solid #444;padding:6px;background:#000000}
.soul{position:absolute;width:24px;height:24px;z-index:8;image-rendering:pixelated;transition:left 0.06s,top 0.06s}
